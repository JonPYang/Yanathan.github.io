<!DOCTYPE html>
<html>
<script>
var playerDeck = [1,2,3,4,5,6,7,8,9,10,11];
var hand = [];
var drawCount = 5;
var discardPile = [];
/* TODO: On new turn, discard all cards in hand, draw if there are enough cards to draw,
check if there are cards in discard pile to move to deck and draw, end drawing if both conditions fail.*/

function add(deck){
    if(deck.length !==0){
      for(var i = 0; i < drawCount && deck.length !== 0; i++) {
        hand.push(deck.pop()); 
          var element = document.createElement("input");
          element.setAttribute("type", "button");
          element.setAttribute("Id", hand[hand.length -1]);
          element.setAttribute("value", hand[hand.length -1]);
          element.setAttribute("onclick", "discard(Number(this.value))");
          document.getElementById("playableHand").appendChild(element);
        }
    }
    document.getElementById("deckTest").innerHTML="Deck: " + initialDeck;
    document.getElementById("handTest").innerHTML="Hand: " + hand;
    document.getElementById("discardPile").innerHTML="Discard Pile: " + discardPile;  
    return hand;
}

function check(){
    document.getElementById("deckTest").innerHTML="Deck: " + initialDeck;
    document.getElementById("handTest").innerHTML="Hand: " + hand;
    document.getElementById("discardPile").innerHTML="Discard Pile: " + discardPile;    
}
  
  
function newTurn() {
    
}

function reDeck(discardDeck){
    if(discardDeck) {
        playerDeck = discardDeck.slice(0);
        discardDeck = [];
        shuffle(playerDeck);
    }
    return playerDeck;
}

function discard(card){
    if (hand.indexOf(card) > -1) {
        discardPile.push(hand.splice(hand.indexOf(card), 1));
        var cardElement = document.getElementById(card);
        cardElement.parentNode.removeChild(cardElement);
    }
    document.getElementById("deckTest").innerHTML="Deck: " + initialDeck;
    document.getElementById("handTest").innerHTML="Hand: " + hand;
    document.getElementById("discardPile").innerHTML="Discard Pile: " + discardPile;  
   
// indexOf not finding card in hand right now

}

function shuffle(deck) {
  var m = deck.length, t, i;
  
  while(m) {
    i = Math.floor(Math.random() * m--);
    t = deck[m];
    deck[m] = deck[i];
    deck[i] = t;
  }
    document.getElementById("deckTest").innerHTML="Deck: " + playerDeck;
  return deck;
}

</script>
<head>
</head>
<body>
<form>

<p id="deckTest">Deck:</p>
<p id="handTest">Hand:</p>
<p id="discardPile">Discard Pile:</p>

<input type="button" onclick="shuffle(playerDeck)" value="Shuffle">
<input type="button" onclick="add(playerDeck)" value="Draw">
<input type="button" onclick="newTurn()" value"New turn">

<span id="playableHand">Deck: </span>
</form>
</body>
</html> 
